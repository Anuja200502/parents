<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Parent Portal ¬∑ Demo Class (FIXED)</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
        :root{--bg0:#06040f;--bg1:#0d0824;--bg2:#100c2e;--p:#8b5cf6;--p2:#6d28d9;--blue:#3b82f6;--cyan:#22d3ee;--green:#10b981;--amber:#f59e0b;--red:#ef4444;--pink:#ec4899;--text:#f0eeff;--muted:rgba(240,238,255,0.45);--glass:rgba(255,255,255,0.045);--glass2:rgba(255,255,255,0.07);--border:rgba(255,255,255,0.08);--border2:rgba(255,255,255,0.13);--r:14px;--r2:22px;--font:'Plus Jakarta Sans',sans-serif}
        html,body{height:100%;overflow-x:hidden}
        body{font-family:var(--font);color:var(--text);background:var(--bg0);min-height:100vh;position:relative}
        body::before{content:'';position:fixed;inset:0;z-index:0;background:radial-gradient(ellipse 80% 60% at 15% 10%,rgba(109,40,217,0.38) 0%,transparent 60%),radial-gradient(ellipse 60% 50% at 85% 80%,rgba(59,130,246,0.28) 0%,transparent 55%),radial-gradient(ellipse 50% 40% at 50% 50%,rgba(139,92,246,0.12) 0%,transparent 60%),radial-gradient(ellipse 70% 60% at 10% 85%,rgba(16,185,129,0.1) 0%,transparent 50%),linear-gradient(160deg,#0d0824 0%,#06030e 40%,#0a0620 100%);pointer-events:none}
        #loginScreen{display:flex}#dashboard{display:none}
        #loginScreen{position:relative;z-index:10;min-height:100vh;align-items:center;justify-content:center;padding:24px 16px}
        .lw{width:100%;max-width:360px;overflow:hidden}
        .brand{text-align:center;margin-bottom:32px}
        .brand-icon{width:68px;height:68px;border-radius:21px;margin:0 auto 16px;background:linear-gradient(135deg,#7c3aed,#2563eb);display:flex;align-items:center;justify-content:center;font-size:1.8rem;box-shadow:0 0 0 6px rgba(124,58,237,0.15),0 0 40px rgba(124,58,237,0.35);position:relative}
        .brand-icon::after{content:'';position:absolute;inset:-2px;border-radius:23px;background:linear-gradient(135deg,rgba(124,58,237,0.6),rgba(37,99,235,0.3));z-index:-1;filter:blur(8px)}
        .brand-name{font-size:1.5rem;font-weight:900;letter-spacing:-0.04em}
        .brand-name em{font-style:normal;color:#a78bfa}
        .brand-sub{font-size:0.75rem;color:var(--muted);margin-top:4px;font-weight:500}
        .lcard{background:rgba(13,8,36,0.75);border:1px solid var(--border2);border-radius:var(--r2);padding:28px 24px 26px;backdrop-filter:blur(32px);-webkit-backdrop-filter:blur(32px);box-shadow:0 32px 64px rgba(0,0,0,0.7),inset 0 1px 0 rgba(255,255,255,0.06)}
        .lf{margin-bottom:16px}
        .lf label{display:block;font-size:0.7rem;font-weight:700;color:var(--muted);letter-spacing:0.08em;text-transform:uppercase;margin-bottom:7px}
        .linp-wrap{display:flex;align-items:center;gap:9px;background:rgba(255,255,255,0.05);border:1.5px solid var(--border);border-radius:12px;padding:0 13px;transition:border-color .2s,box-shadow .2s}
        .linp-wrap:focus-within{border-color:var(--p);box-shadow:0 0 0 4px rgba(139,92,246,0.15)}
        .linp-wrap i{color:var(--muted);font-size:0.82rem;flex-shrink:0}
        .linp-wrap input{background:none;border:none;outline:none;color:var(--text);width:100%;padding:12px 0;font-family:var(--font);font-size:0.88rem;font-weight:500}
        .linp-wrap input::placeholder{color:rgba(255,255,255,0.18)}
        .pin-row{display:flex;gap:8px;width:100%;overflow:hidden}
        .pin-cell{flex:1 1 0;min-width:0;width:0;height:50px;text-align:center;font-size:1.4rem;font-weight:900;background:rgba(255,255,255,0.05);border:1.5px solid var(--border);border-radius:11px;color:var(--text);font-family:var(--font);outline:none;transition:border-color .2s,box-shadow .2s;-webkit-appearance:none;appearance:none}
        .pin-cell:focus{border-color:var(--p);box-shadow:0 0 0 4px rgba(139,92,246,0.15)}
        .pin-cell.filled{border-color:rgba(139,92,246,0.45)}
        .lerr{margin-top:12px;display:none;background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.22);border-radius:10px;padding:9px 13px;color:#fca5a5;font-size:0.78rem;font-weight:500}
        .btn-signin{width:100%;margin-top:20px;background:linear-gradient(135deg,#7c3aed,#2563eb);color:#fff;border:none;cursor:pointer;padding:13px;border-radius:12px;font-family:var(--font);font-size:0.92rem;font-weight:800;letter-spacing:0.02em;box-shadow:0 6px 24px rgba(124,58,237,0.4);transition:opacity .2s,transform .15s,box-shadow .15s;position:relative;overflow:hidden}
        .btn-signin::after{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,0.1),transparent)}
        .btn-signin:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 12px 32px rgba(124,58,237,0.5)}
        .btn-signin:disabled{opacity:0.55;cursor:not-allowed;transform:none}
        #dashboard{flex-direction:column;min-height:100vh;position:relative;z-index:10;overflow-x:hidden;width:100%}
        .topbar{position:sticky;top:0;z-index:200;background:rgba(6,4,15,0.8);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:9px 14px;display:flex;align-items:center;justify-content:space-between;gap:10px}
        .tb-left{display:flex;align-items:center;gap:9px;flex:1;min-width:0;overflow:hidden}
        .tb-av{width:36px;height:36px;border-radius:10px;object-fit:cover;flex-shrink:0;border:2px solid rgba(139,92,246,0.55)}
        .tb-name{display:none}
        .tb-cls{font-size:0.72rem;font-weight:800;padding:4px 12px;border-radius:8px;background:rgba(139,92,246,0.2);border:1px solid rgba(139,92,246,0.35);color:#c4b5fd;white-space:nowrap;display:inline-block}
        .btn-out{background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.2);color:#fca5a5;border-radius:8px;padding:5px 11px;font-size:0.72rem;font-weight:700;cursor:pointer;font-family:var(--font);flex-shrink:0;transition:background .2s;white-space:nowrap}
        .btn-out:hover{background:rgba(239,68,68,0.2)}
        .hero{padding:0 14px;background:linear-gradient(160deg,rgba(109,40,217,0.25) 0%,rgba(37,99,235,0.12) 60%,transparent 100%);border-bottom:1px solid var(--border)}
        .hero-inner{max-width:640px;margin:0 auto;display:flex;align-items:center;gap:14px;padding:18px 0 16px}
        .hero-av-wrap{position:relative;flex-shrink:0}
        .hero-av{width:66px;height:66px;border-radius:18px;object-fit:cover;border:2px solid transparent;background:linear-gradient(var(--bg1),var(--bg1)) padding-box,linear-gradient(135deg,#8b5cf6,#3b82f6) border-box;box-shadow:0 0 0 4px rgba(139,92,246,0.15),0 8px 24px rgba(0,0,0,0.5)}
        .hero-online{position:absolute;bottom:-3px;right:-3px;width:14px;height:14px;border-radius:50%;background:#10b981;border:2.5px solid var(--bg0)}
        .hero-info{min-width:0;flex:1;overflow:hidden}
        .hero-name{font-size:1.2rem;font-weight:900;letter-spacing:-0.03em;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
        .hero-cls{font-size:0.75rem;color:#a78bfa;font-weight:700;margin:3px 0 2px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
        .hero-reg{font-size:0.68rem;color:var(--muted);font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
        .stats-strip{display:flex;gap:8px;padding:10px 12px;border-bottom:1px solid var(--border);background:rgba(0,0,0,0.15);overflow-x:auto}
        .stats-strip::-webkit-scrollbar{display:none}
        .stat-chip{flex:1;min-width:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;padding:11px 6px;border-radius:14px;border:1px solid var(--border);background:var(--glass);text-align:center;position:relative;overflow:hidden}
        .stat-chip::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;border-radius:999px}
        .sc-green::before{background:linear-gradient(90deg,#10b981,#34d399)}
        .sc-purple::before{background:linear-gradient(90deg,#7c3aed,#a78bfa)}
        .sc-amber::before{background:linear-gradient(90deg,#d97706,#fbbf24)}
        .sc-pink::before{background:linear-gradient(90deg,#be185d,#f472b6)}
        .stat-val{font-size:1.05rem;font-weight:900;line-height:1;letter-spacing:-0.02em}
        .stat-lbl{font-size:0.6rem;font-weight:700;text-transform:uppercase;letter-spacing:0.05em;color:var(--muted);margin-top:1px}
        .pages{flex:1;overflow-y:auto;overflow-x:hidden;padding-bottom:calc(68px + env(safe-area-inset-bottom));max-width:640px;margin:0 auto;width:100%;box-sizing:border-box}
        .page{display:none;padding:14px}
        .page.active{display:block}
        .sh{display:flex;align-items:center;justify-content:space-between;margin:18px 0 10px}
        .sh-title{font-size:0.72rem;font-weight:800;text-transform:uppercase;letter-spacing:0.1em;color:var(--muted)}
        .sh-badge{font-size:0.65rem;font-weight:700;color:var(--muted);background:var(--glass2);border-radius:20px;padding:2px 9px}
        .gc{background:var(--glass);border:1px solid var(--border);border-radius:16px;overflow:hidden}
        .gc+.gc{margin-top:8px}
        .ir{display:flex;align-items:baseline;justify-content:space-between;gap:12px;padding:11px 14px;font-size:0.82rem;border-bottom:1px solid var(--border);overflow:hidden}
        .ir:last-child{border-bottom:none}
        .ir-k{color:var(--muted);font-weight:500;flex-shrink:0;font-size:0.76rem}
        .ir-v{font-weight:700;min-width:0;flex:1;text-align:right;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
        .ov-grid{display:grid;grid-template-columns:1fr 1fr;gap:9px;overflow:hidden}
        .ovc{border-radius:16px;padding:15px 13px 13px;display:flex;flex-direction:column;position:relative;overflow:hidden;gap:5px}
        .ovc::after{content:'';position:absolute;right:-15px;bottom:-15px;width:80px;height:80px;border-radius:50%;background:rgba(255,255,255,0.06)}
        .ovc-ico{font-size:1.5rem;display:block;margin-bottom:2px}
        .ovc-val{font-size:clamp(1.1rem,4vw,1.55rem);font-weight:900;letter-spacing:-0.03em;line-height:1;word-break:break-word;overflow-wrap:anywhere}
        .ovc-lbl{font-size:0.65rem;font-weight:700;text-transform:uppercase;letter-spacing:0.06em;opacity:0.65}
        .ovc-a{background:linear-gradient(140deg,rgba(16,185,129,0.28),rgba(5,150,105,0.08));border:1px solid rgba(16,185,129,0.22);color:#34d399}
        .ovc-p{background:linear-gradient(140deg,rgba(139,92,246,0.28),rgba(109,40,217,0.06));border:1px solid rgba(139,92,246,0.22);color:#c4b5fd}
        .ovc-t{background:linear-gradient(140deg,rgba(245,158,11,0.28),rgba(217,119,6,0.06));border:1px solid rgba(245,158,11,0.2);color:#fcd34d}
        .ovc-h{background:linear-gradient(140deg,rgba(236,72,153,0.28),rgba(190,24,93,0.06));border:1px solid rgba(236,72,153,0.2);color:#f9a8d4}
        .att-top{display:flex;align-items:center;flex-wrap:wrap;gap:14px;padding:16px;overflow:hidden}
        .att-count-wrap{flex:1;min-width:0}
        .att-big-num{font-size:3rem;font-weight:900;line-height:1;color:var(--green);letter-spacing:-0.04em}
        .att-big-sub{font-size:0.72rem;color:var(--muted);margin-top:3px;font-weight:500}
        .att-ring{width:80px;height:80px;flex-shrink:0;pointer-events:none;touch-action:none;user-select:none} /* üõë FIX: Prevents auto-scroll & phone stuck */
        .att-dots{display:flex;flex-wrap:wrap;gap:6px;padding:4px 14px 14px}
        .adot{width:clamp(44px,12vw,52px);height:clamp(50px,13vw,58px);border-radius:10px;flex-shrink:0;font-weight:800;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;transition:transform .15s;cursor:default;font-size:0.68rem}
        .adot:hover{transform:scale(1.08)}
        .adot-p{background:rgba(16,185,129,0.15);border:1.5px solid rgba(52,211,153,0.45);color:#34d399}
        .adot-p .adot-day{font-size:1rem;font-weight:900;color:#34d399}
        .adot-p .adot-mon{font-size:0.52rem;color:rgba(52,211,153,0.75);text-transform:uppercase}
        .adot-a{background:rgba(239,68,68,0.12);border:1.5px solid rgba(239,68,68,0.35);color:#f87171}
        .adot-a .adot-day{font-size:1rem;font-weight:900;color:#f87171}
        .adot-a .adot-mon{font-size:0.52rem;color:rgba(248,113,113,0.75);text-transform:uppercase}
        .pay-row{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:12px 14px;border-bottom:1px solid var(--border);overflow:hidden}
        .pay-row:last-child{border-bottom:none}
        .pay-month{font-size:0.83rem;font-weight:700;flex-shrink:0}
        .test-row{padding:12px 14px;border-bottom:1px solid var(--border)}
        .test-row:last-child{border-bottom:none}
        .test-hd{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:6px;overflow:hidden}
        .test-name{font-size:0.82rem;font-weight:700;flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
        .test-score{font-size:0.92rem;font-weight:900;flex-shrink:0}
        .bar{height:5px;background:rgba(255,255,255,0.07);border-radius:20px;overflow:hidden}
        .bar-f{height:100%;border-radius:20px;transition:width 1.2s cubic-bezier(.16,1,.3,1)}
        .lrow{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:11px 14px;border-bottom:1px solid var(--border);overflow:hidden}
        .lrow:last-child{border-bottom:none}
        .lrow-n{flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:0.82rem;font-weight:600}
        .pill{display:inline-flex;align-items:center;gap:4px;padding:3px 9px;border-radius:100px;font-size:0.68rem;font-weight:700;flex-shrink:0;white-space:nowrap}
        .pill-g{background:rgba(16,185,129,0.15);color:#34d399;border:1px solid rgba(16,185,129,0.25)}
        .pill-r{background:rgba(239,68,68,0.12);color:#f87171;border:1px solid rgba(239,68,68,0.22)}
        .pill-a{background:rgba(245,158,11,0.12);color:#fbbf24;border:1px solid rgba(245,158,11,0.22)}
        .pill-m{background:rgba(139,92,246,0.12);color:#c4b5fd;border:1px solid rgba(139,92,246,0.22)}
        .pill-n{background:rgba(100,116,139,0.1);color:#94a3b8;border:1px solid rgba(100,116,139,0.15)}
        .remark-card{background:linear-gradient(135deg,rgba(124,58,237,0.18),rgba(37,99,235,0.08));border:1px solid rgba(124,58,237,0.28);border-radius:16px;padding:18px}
        .remark-lbl{font-size:0.65rem;font-weight:800;text-transform:uppercase;letter-spacing:0.1em;color:#a78bfa}
        .remark-txt{margin-top:10px;font-size:0.85rem;line-height:1.8;color:#ddd6fe;font-style:italic;word-break:break-word;overflow-wrap:break-word}
        .empty{padding:26px;text-align:center;color:var(--muted);font-size:0.8rem}
        .empty i{display:block;font-size:1.6rem;margin-bottom:8px;opacity:0.3}
        .loader{display:flex;gap:5px;justify-content:center;padding:26px}
        .loader span{width:7px;height:7px;border-radius:50%;background:var(--p);animation:ld .75s ease-in-out infinite}
        .loader span:nth-child(2){animation-delay:.12s}
        .loader span:nth-child(3){animation-delay:.24s}
        @keyframes ld{0%,80%,100%{transform:scale(.7);opacity:.3}40%{transform:scale(1.2);opacity:1}}
        .spin{display:inline-block;width:15px;height:15px;border:2px solid rgba(255,255,255,0.2);border-top-color:#fff;border-radius:50%;animation:sp .7s linear infinite;vertical-align:middle;margin-right:7px}
        @keyframes sp{to{transform:rotate(360deg)}}
        .bnav{position:fixed;bottom:0;left:0;right:0;z-index:200;background:rgba(6,4,15,0.88);backdrop-filter:blur(24px);-webkit-backdrop-filter:blur(24px);border-top:1px solid var(--border);display:flex;padding:5px 0 calc(5px + env(safe-area-inset-bottom))}
        .ntab{flex:1;display:flex;flex-direction:column;align-items:center;gap:2px;padding:7px 4px;cursor:pointer;border:none;background:none;color:rgba(240,238,255,0.35);font-family:var(--font);transition:color .2s;position:relative}
        .ntab i{font-size:1rem;transition:transform .2s}
        .ntab span{font-size:0.56rem;font-weight:700;letter-spacing:0.04em;text-transform:uppercase}
        .ntab.active{color:var(--p)}
        .ntab.active i{transform:translateY(-2px)}
        .ntab-pip{position:absolute;top:0;left:50%;transform:translateX(-50%);width:22px;height:2.5px;border-radius:0 0 4px 4px;background:linear-gradient(90deg,#7c3aed,#3b82f6);opacity:0;transition:opacity .2s}
        .ntab.active .ntab-pip{opacity:1}
        ::-webkit-scrollbar{width:3px}
        ::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.1);border-radius:3px}
        @media(max-width:480px){.hero-av{width:56px;height:56px;border-radius:14px}.hero-name{font-size:1.05rem}.stat-chip{padding:9px 6px}.stat-val{font-size:0.95rem}.stat-lbl{font-size:0.55rem}.ov-grid{gap:7px}.ovc{padding:12px 11px 11px}.att-big-num{font-size:2.4rem}}
        @media(max-width:360px){.lcard{padding:20px 14px}.pin-cell{height:44px;font-size:1.2rem}.ov-grid{grid-template-columns:1fr}.stat-chip{min-width:68px}}
        .demo-hint{background:rgba(139,92,246,0.25);border:1px dashed #a78bfa;border-radius:40px;padding:10px 16px;margin-bottom:20px;font-size:0.75rem;font-weight:500;color:#c4b5fd;text-align:center;backdrop-filter:blur(8px)}
        .demo-hint i{margin-right:6px;color:#8b5cf6}
    </style>
</head>
<body>
    <!-- LOGIN SCREEN with demo hint -->
    <div id="loginScreen">
        <div class="lw">
            <div class="brand">
                <div class="brand-icon">üß™</div>
                <div class="brand-name">Demo <em>Class</em></div>
                <div class="brand-sub">Parent Portal ¬∑ DEMO preview</div>
            </div>
            <div class="lcard">
                <div class="demo-hint">
                    <i class="fa-solid fa-flask"></i> demo ‚Äî any reg / any 4‚Äëdigit PIN works
                </div>
                <div class="lf">
                    <label><i class="fa-solid fa-hashtag" style="margin-right:5px;opacity:.45;"></i>Registration No.</label>
                    <div class="linp-wrap">
                        <i class="fa-solid fa-id-card"></i>
                        <input id="regIn" type="text" placeholder="DEMO ‚Äî anything" autocomplete="off" spellcheck="false" value="demo-001">
                    </div>
                </div>
                <div class="lf" style="margin-bottom:0">
                    <label><i class="fa-solid fa-lock" style="margin-right:5px;opacity:.45;"></i>4-Digit PIN</label>
                    <div class="pin-row">
                        <input type="password" inputmode="numeric" maxlength="1" class="pin-cell" id="p0" value="1">
                        <input type="password" inputmode="numeric" maxlength="1" class="pin-cell" id="p1" value="2">
                        <input type="password" inputmode="numeric" maxlength="1" class="pin-cell" id="p2" value="3">
                        <input type="password" inputmode="numeric" maxlength="1" class="pin-cell" id="p3" value="4">
                    </div>
                </div>
                <div class="lerr" id="errBox"><i class="fa-solid fa-circle-exclamation"></i> <span id="errMsg"></span></div>
                <button class="btn-signin" id="loginBtn">
                    <span id="btnLab"><i class="fa-solid fa-right-to-bracket" style="margin-right:7px;"></i>Enter demo dashboard</span>
                    <span id="btnSpin" style="display:none"><span class="spin"></span>Verifying‚Ä¶</span>
                </button>
            </div>
        </div>
    </div>

    <!-- DASHBOARD (fully populated with demo data) -->
    <div id="dashboard" style="display:none;flex-direction:column;min-height:100vh;">
        <!-- Top Bar -->
        <div class="topbar">
            <div class="tb-left">
                <img id="tbAv" class="tb-av" src="https://ui-avatars.com/api/?name=Sam+Randika&background=6d28d9&color=fff&size=120&bold=true&format=svg" alt="">
                <div style="min-width:0;overflow:hidden">
                    <div class="tb-name" id="tbName">Sam Randika</div>
                    <div class="tb-cls" id="tbCls">12 (Bio)</div>
                </div>
            </div>
            <button class="btn-out" id="logoutBtn"><i class="fa-solid fa-right-from-bracket"></i> Logout</button>
        </div>

        <!-- Hero -->
        <div class="hero">
            <div class="hero-inner">
                <div class="hero-av-wrap">
                    <img id="heroAv" class="hero-av" src="https://ui-avatars.com/api/?name=Sam+Randika&background=6d28d9&color=fff&size=120&bold=true&format=svg" alt="">
                    <div class="hero-online"></div>
                </div>
                <div class="hero-info">
                    <div class="hero-name" id="hName">Sam Randika</div>
                    <div class="hero-cls" id="hCls">Grade 12 (Bio)</div>
                    <div class="hero-reg" id="hReg">Reg: 2024-081</div>
                </div>
            </div>
        </div>

        <!-- Stats Strip (values will be overwritten by script, but static fallback) -->
        <div class="stats-strip">
            <div class="stat-chip sc-green"><div class="stat-val" id="ssAtt" style="color:#34d399">72%</div><div class="stat-lbl">Attended</div></div>
            <div class="stat-chip sc-purple"><div class="stat-val" id="ssPay" style="color:#f87171;font-size:0.75rem;padding-top:3px">DUE ‚ùå</div><div class="stat-lbl">This Month</div></div>
            <div class="stat-chip sc-amber"><div class="stat-val" id="ssAvg" style="color:#fbbf24">68%</div><div class="stat-lbl">Avg. Mark</div></div>
            <div class="stat-chip sc-pink"><div class="stat-val" id="ssHW" style="color:#f9a8d4">5/8</div><div class="stat-lbl">HW Done</div></div>
        </div>

        <!-- Page Area -->
        <div class="pages">
            <!-- Overview -->
            <div class="page active" id="page-overview">
                <div class="sh"><span class="sh-title">Overview</span></div>
                <div class="ov-grid">
                    <div class="ovc ovc-a"><span class="ovc-ico">üìÖ</span><div class="ovc-val" id="ovAtt">72%</div><div class="ovc-lbl">Days Attended</div></div>
                    <div class="ovc ovc-p"><span class="ovc-ico">üí≥</span><div class="ovc-val" id="ovPay" style="color:#f87171">DUE ‚ùå</div><div class="ovc-lbl">This Month Fee</div></div>
                    <div class="ovc ovc-t"><span class="ovc-ico">‚úèÔ∏è</span><div class="ovc-val" id="ovAvg">68%</div><div class="ovc-lbl">Average Mark</div></div>
                    <div class="ovc ovc-h"><span class="ovc-ico">üìö</span><div class="ovc-val" id="ovHW">5/8</div><div class="ovc-lbl">HW Completed</div></div>
                </div>
                <div class="sh" style="margin-top:22px"><span class="sh-title">Student Details</span></div>
                <div class="gc">
                    <div class="ir"><span class="ir-k">Full Name</span><span class="ir-v" id="dName">Sam Randika</span></div>
                    <div class="ir"><span class="ir-k">Reg. No</span><span class="ir-v" id="dReg">2024-081</span></div>
                    <div class="ir"><span class="ir-k">NIC</span><span class="ir-v" id="dNic">200412345678</span></div>
                    <div class="ir"><span class="ir-k">Phone</span><span class="ir-v" id="dPhone">077-1234567</span></div>
                    <div class="ir"><span class="ir-k">Class</span><span class="ir-v" id="dCls">12 (Bio)</span></div>
                </div>
                <div class="sh" style="margin-top:20px"><span class="sh-title">Teacher's Remark</span></div>
                <div id="ovRemark"></div>
            </div>
            <!-- Attendance -->
            <div class="page" id="page-att">
                <div class="sh"><span class="sh-title">Attendance</span><span class="sh-badge" id="attBadge">13/18 sessions</span></div>
                <div class="gc">
                    <div class="att-top">
                        <div class="att-count-wrap"><div class="att-big-num" id="attNum">72%</div><div class="att-big-sub">total sessions</div></div>
                        <canvas class="att-ring" id="attChart"></canvas>
                    </div>
                    <div class="att-dots" id="attDots"></div>
                </div>
            </div>
            <!-- Fees -->
            <div class="page" id="page-pay">
                <div class="sh"><span class="sh-title">Monthly Fees</span></div>
                <div class="gc" id="payList"></div>
            </div>
            <!-- Tests -->
            <div class="page" id="page-tests">
                <div class="sh"><span class="sh-title">Test Results</span><span class="sh-badge" id="testBadge">4 tests</span></div>
                <div class="gc" id="testList"></div>
            </div>
            <!-- HW & Tutorials -->
            <div class="page" id="page-hw">
                <div class="sh"><span class="sh-title">Homework</span></div>
                <div class="gc" id="hwList"></div>
                <div class="sh" style="margin-top:18px"><span class="sh-title">Tutorials / Papers</span></div>
                <div class="gc" id="tuteList"></div>
            </div>
        </div><!-- pages -->

        <!-- Bottom Nav -->
        <nav class="bnav">
            <button class="ntab active" data-page="overview"><div class="ntab-pip"></div><i class="fa-solid fa-house"></i><span>Home</span></button>
            <button class="ntab" data-page="att"><div class="ntab-pip"></div><i class="fa-solid fa-calendar-check"></i><span>Attend</span></button>
            <button class="ntab" data-page="pay"><div class="ntab-pip"></div><i class="fa-solid fa-wallet"></i><span>Fees</span></button>
            <button class="ntab" data-page="tests"><div class="ntab-pip"></div><i class="fa-solid fa-chart-bar"></i><span>Tests</span></button>
            <button class="ntab" data-page="hw"><div class="ntab-pip"></div><i class="fa-solid fa-book"></i><span>HW</span></button>
        </nav>
    </div>

    <script>
        (function() {
            const $ = id => document.getElementById(id);
            const pins = [0,1,2,3].map(i => $('p'+i));
            const loginBtn = $('loginBtn');
            const regIn = $('regIn');
            const errBox = $('errBox');
            const btnLab = $('btnLab');
            const btnSpin = $('btnSpin');
            
            let attChart = null;

            function populateDemoDashboard() {
                $('payList').innerHTML = `
                    <div class="pay-row"><div class="pay-month">Jan 2025</div><span class="pill pill-g"><i class="fa-solid fa-check"></i> Paid</span></div>
                    <div class="pay-row"><div class="pay-month">Feb 2025</div><span class="pill pill-g"><i class="fa-solid fa-check"></i> Paid</span></div>
                    <div class="pay-row"><div class="pay-month">Mar 2025</div><span class="pill pill-r"><i class="fa-solid fa-clock"></i> Due</span></div>
                    <div class="pay-row"><div class="pay-month">Apr 2025</div><span class="pill pill-r"><i class="fa-solid fa-clock"></i> Due</span></div>
                    <div class="pay-row"><div class="pay-month">May 2025</div><span class="pill pill-n">‚Äî</span></div>
                    <div class="pay-row"><div class="pay-month">Jun 2025</div><span class="pill pill-n">‚Äî</span></div>
                `;
                $('testList').innerHTML = `
                    <div class="test-row"><div class="test-hd"><span class="test-name">Monthly test - Newton laws</span><span class="test-score" style="color:#10b981">82%</span></div><div class="bar"><div class="bar-f" style="width:82%;background:#10b981"></div></div></div>
                    <div class="test-row"><div class="test-hd"><span class="test-name">Work, energy & power</span><span class="test-score" style="color:#f59e0b">64%</span></div><div class="bar"><div class="bar-f" style="width:64%;background:#f59e0b"></div></div></div>
                    <div class="test-row"><div class="test-hd"><span class="test-name">Gravitation</span><span class="test-score" style="color:#ef4444">38%</span></div><div class="bar"><div class="bar-f" style="width:38%;background:#ef4444"></div></div></div>
                    <div class="test-row"><div class="test-hd"><span class="test-name">Thermodynamics</span><span class="test-score" style="color:#f59e0b">58%</span></div><div class="bar"><div class="bar-f" style="width:58%;background:#f59e0b"></div></div></div>
                `;
                $('hwList').innerHTML = `
                    <div class="lrow"><span class="lrow-n">Chapter 4 exercises</span><span class="pill pill-g"><i class="fa-solid fa-check"></i> Done</span></div>
                    <div class="lrow"><span class="lrow-n">Revision: kinematics</span><span class="pill pill-r"><i class="fa-solid fa-xmark"></i> Not Done</span></div>
                    <div class="lrow"><span class="lrow-n">Vectors worksheet</span><span class="pill pill-g"><i class="fa-solid fa-check"></i> Done</span></div>
                    <div class="lrow"><span class="lrow-n">Circular motion problems</span><span class="pill pill-a"><i class="fa-solid fa-clock"></i> Pending</span></div>
                    <div class="lrow"><span class="lrow-n">Optics assignment</span><span class="pill pill-g"><i class="fa-solid fa-check"></i> Done</span></div>
                    <div class="lrow"><span class="lrow-n">AC theory questions</span><span class="pill pill-r"><i class="fa-solid fa-xmark"></i> Not Done</span></div>
                    <div class="lrow"><span class="lrow-n">Thermo problems</span><span class="pill pill-g"><i class="fa-solid fa-check"></i> Done</span></div>
                    <div class="lrow"><span class="lrow-n">Semiconductor notes</span><span class="pill pill-n">Pending</span></div>
                `;
                $('tuteList').innerHTML = `
                    <div class="lrow"><span class="lrow-n">Tute 01: Measurements</span><span class="pill pill-m"><i class="fa-solid fa-check"></i> Issued</span></div>
                    <div class="lrow"><span class="lrow-n">Tute 02: Vectors</span><span class="pill pill-m"><i class="fa-solid fa-check"></i> Issued</span></div>
                    <div class="lrow"><span class="lrow-n">Tute 03: Dynamics</span><span class="pill pill-n">Not issued</span></div>
                    <div class="lrow"><span class="lrow-n">Past paper 2019</span><span class="pill pill-m"><i class="fa-solid fa-check"></i> Issued</span></div>
                `;
                $('ovRemark').innerHTML = `<div class="remark-card"><div class="remark-lbl"><i class="fa-solid fa-quote-left" style="margin-right:5px"></i>Teacher's Note</div><div class="remark-txt">Sam is consistent but needs to focus on thermodynamics. He shows good effort in practicals.</div></div>`;

                if (attChart) attChart.destroy();

                const canvas = $('attChart');
                const ctx = canvas.getContext('2d');
                
                // Extra safety: prevent any accidental scroll
                canvas.addEventListener('touchstart', (e) => e.preventDefault(), { passive: false });
                canvas.addEventListener('wheel', (e) => e.preventDefault(), { passive: false });
                
                attChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Present', 'Absent'],
                        datasets: [{ 
                            data: [13,5], 
                            backgroundColor: ['#10b981','#ef4444'], 
                            borderWidth: 0 
                        }]
                    },
                    options: { 
                        cutout: '75%', 
                        responsive: true, 
                        maintainAspectRatio: false,
                        plugins: { 
                            legend: { display: false }, 
                            tooltip: { enabled: false } 
                        } 
                    }
                });

                const dots = $('attDots');
                dots.innerHTML = '';
                const demoDates = ['2025-02-01','2025-02-08','2025-02-15','2025-02-22','2025-03-01','2025-03-08','2025-03-15','2025-03-22','2025-03-29','2025-04-05','2025-04-12','2025-04-19','2025-04-26','2025-05-03','2025-05-10','2025-05-17','2025-05-24','2025-05-31'];
                const presentSet = new Set(['2025-02-01','2025-02-08','2025-02-15','2025-03-01','2025-03-08','2025-03-15','2025-03-22','2025-04-05','2025-04-12','2025-04-19','2025-04-26','2025-05-10','2025-05-24']);
                demoDates.forEach(date => {
                    const d = document.createElement('div');
                    d.className = `adot ${presentSet.has(date) ? 'adot-p' : 'adot-a'}`;
                    const [y,m,day] = date.split('-');
                    const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
                    d.innerHTML = `<span class="adot-day">${day.replace(/^0/,'')}</span><span class="adot-mon">${months[parseInt(m)-1]}</span>`;
                    d.title = date + (presentSet.has(date)?' ‚úÖ Present':' ‚ùå Absent');
                    dots.appendChild(d);
                });
            }

            function login() {
                errBox.style.display = 'none';
                btnLab.style.display = 'none';
                btnSpin.style.display = '';
                loginBtn.disabled = true;

                setTimeout(() => {
                    populateDemoDashboard();

                    $('loginScreen').style.display = 'none';
                    $('dashboard').style.display = 'flex';

                    btnLab.style.display = '';
                    btnSpin.style.display = 'none';
                    loginBtn.disabled = false;
                }, 300);
            }

            function logout() {
                $('loginScreen').style.display = 'flex';
                $('dashboard').style.display = 'none';
                pins.forEach((p,i) => { p.value = (i+1).toString(); p.classList.add('filled'); });
                regIn.value = 'demo-001';
                errBox.style.display = 'none';
                document.querySelectorAll('.ntab').forEach((b,i) => b.classList.toggle('active', i===0));
                document.querySelectorAll('.page').forEach((p,i) => p.classList.toggle('active', i===0));
                
                if (attChart) {
                    attChart.destroy();
                    attChart = null;
                }
            }

            loginBtn.addEventListener('click', login);
            $('logoutBtn').addEventListener('click', logout);

            pins.forEach((el,i) => {
                el.addEventListener('input', function() {
                    this.value = this.value.replace(/\D/g,'').slice(0,1);
                    this.classList.toggle('filled',!!this.value);
                    if(this.value && i<3) pins[i+1].focus();
                });
                el.addEventListener('keydown', e => {
                    if(e.key==='Backspace' && !el.value && i>0) pins[i-1].focus();
                    if(e.key==='Enter') login();
                });
                el.addEventListener('paste', e => {
                    e.preventDefault();
                    const t = (e.clipboardData||window.clipboardData).getData('text').replace(/\D/g,'');
                    t.slice(0,4).split('').forEach((c,j)=>{ if(pins[j]){ pins[j].value=c; pins[j].classList.add('filled'); } });
                    pins[Math.min(t.length,3)].focus();
                });
            });
            regIn.addEventListener('keydown', e => { if(e.key==='Enter') pins[0].focus(); });

            document.querySelectorAll('.ntab').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.ntab').forEach(b=>b.classList.remove('active'));
                    document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
                    this.classList.add('active');
                    const pageId = 'page-'+this.dataset.page;
                    if($(pageId)) $(pageId).classList.add('active');
                });
            });

            window.addEventListener('load', function() {
                pins.forEach((p,i) => { if(!p.value) p.value = (i+1).toString(); p.classList.add('filled'); });
                if($('dashboard').style.display === 'flex') populateDemoDashboard();
            });
        })();
    </script>
</body>
</html>